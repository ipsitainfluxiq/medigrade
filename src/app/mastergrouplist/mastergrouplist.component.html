<app-frontheader></app-frontheader>

<div class="container-fluid admin_inner_heading">

  <h2><span >Master Group Lists</span></h2>
</div>

<div class="container-fluid pateints_inner_body">
  <div class="pateints_searchdiv_wrapper">
    <div class="pateints_searchdiv">
      <input type="text" placeholder="Search..." #listFilter (keyup)="0">
      <input type="button">
      <div class="clearfix"></div>
    </div>
  </div>
  <div class="pateints_searchdiv_wrapper ">

    <button [routerLink]="['/mastergroupadd']" class="helpdeskbtn">Add Master Group</button>

    <div class="clearfix"></div>
  </div>

  <div class="userrecruiterlist_table_wrapper">
    <table>
      <thead>
      <tr>
        <th>Group Name</th>
        <th>Group Description</th>
        <th>Group Corporate Manager</th>
        <th>Group Status</th>
        <th class="hide">Override Name</th>
        <th class="hide">Override Role</th>
        <th class="hide">Override Commission</th>
        <th class="hide">Override Name</th>
        <th class="hide">Override Role</th>
        <th class="hide">Override Commission</th>
        <th class="hide">Override Name</th>
        <th class="hide">Override Role</th>
        <th class="hide">Override Commission</th>
        <th class="hide">Override Name</th>
        <th class="hide">Override Role</th>
        <th class="hide">Override Commission</th>
        <th class="hide">Override Name</th>
        <th class="hide">Override Role</th>
        <th class="hide">Override Commission</th>
        <th class="hide">Override Name</th>
        <th class="hide">Override Role</th>
        <th class="hide">Override Commission</th>
        <th>Number of eligible for override</th>
        <th>Actions</th>
        <th>Links</th>
        <th>Number of users under Master group</th>
      </tr>
      </thead>

      <tbody *ngIf="datalist?.length>0">
      <tr *ngFor="let item of datalist | orderBy:'_id':'reverse' | usersearch:listFilter.value | paginate: { itemsPerPage: 25, currentPage: p }; let i = index">
        <td   data-label="Group Name"  [routerLink]="['/mastergroupedit',item._id]">{{item.groupname}}</td>
        <td   data-label="Group Description" [routerLink]="['/mastergroupedit',item._id]" [innerHTML]="_sanitizer.bypassSecurityTrustHtml(item.groupdescription)" ></td>
        <td   data-label="Group Corporate Manager"[routerLink]="['/mastergroupedit',item._id]" ><p *ngIf="item.GroupCorporateManagerdetail?.length>0">{{item.GroupCorporateManagerdetail[0].firstname}} {{item.GroupCorporateManagerdetail[0].lastname}}</p></td>
        <td  data-label="Group Status" [routerLink]="['/mastergroupedit',item._id]">
          <p *ngIf="item.groupactive=='1'">Active</p>
          <p *ngIf="item.groupactive=='0'">Inactive</p>
        </td>
          <td  data-label=" "  [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridename0}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overriderole0}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridecommission0}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridename1}}</td>
          <td     [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overriderole1}}</td>
          <td     [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridecommission1}}</td>
          <td   [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridename2}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overriderole2}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridecommission2}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridename3}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overriderole3}}</td>
          <td     [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridecommission3}}</td>
          <td   [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridename4}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overriderole4}}</td>
          <td    [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridecommission4}}</td>
          <td   [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridename5}}</td>
          <td   [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overriderole5}}</td>
          <td  [routerLink]="['/mastergroupedit',item._id]" class="hide">{{item.overridecommission5}}</td>
          <td   data-label="Number of eligible for override"  [routerLink]="['/mastergroupedit',item._id]">{{item.no_on_introduction}}</td>
          <td   data-label="Actions" > <div class="adduser_link"  (click)="adduser(item._id)"><span>Add User</span></div></td>
          <td  data-label="Links">


           <!--   Landing: <p>http://{{item.GroupCorporateManagerdetail[0].username}}.{{serverhost}}/#/landing</p>
              <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc(item.GroupCorporateManagerdetail[0].username)' (click)="showcopied()">
              Signup Page: <p>http://{{item.GroupCorporateManagerdetail[0].username}}.{{serverhost}}/#/sign-up</p>
              <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc1(item.GroupCorporateManagerdetail[0].username)' (click)="showcopied()">
              Cgx: <p>http://{{item.GroupCorporateManagerdetail[0].username}}.{{serverhost}}/#/cgx</p>
              <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc2(item.GroupCorporateManagerdetail[0].username)' (click)="showcopied()">-->
              <table width="100%" class="compensationmodifier_subtable">
                  <tr>
                      <td style="text-align: left;"><h4>SIGN UP PAGE:</h4>
                          <span>http://{{commonurl}}/#/sign-up/{{item._id}}/{{item.GroupCorporateManagerdetail[0]._id}}</span></td>
                      <td>
                        <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc1(item._id, item.GroupCorporateManagerdetail[0]._id)' (click)="showcopied()">
                      </td>
                  </tr>
                  <tr class="hide">
                      <td style="text-align: left;"><h4>LANDING PAGE:</h4>
                        <!--  <span>http://{{item.GroupCorporateManagerdetail[0].username}}.{{commonurl}}/#/landing</span>-->
                        <span>http://{{commonurl}}/#/landing/{{item._id}}/{{item.GroupCorporateManagerdetail[0]._id}}</span>
                      </td>
                      <td>
                       <!-- <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc(item.GroupCorporateManagerdetail[0].username,item._id)' (click)="showcopied()">-->
                        <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc(item._id, item.GroupCorporateManagerdetail[0]._id)' (click)="showcopied()">
                      </td>
                  </tr>
                  <tr class="hide">
                      <td style="text-align: left;"><h4>VIDEO PAGE:</h4>
                         <!-- <span>http://{{item.GroupCorporateManagerdetail[0].username}}.{{commonurl}}/#/cgx</span>-->
                        <span>http://{{commonurl}}/#/cgx/{{item._id}}/{{item.GroupCorporateManagerdetail[0]._id}}</span>
                      </td>
                      <td>
                        <!--<input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc2(item.GroupCorporateManagerdetail[0].username,item._id)' (click)="showcopied()">-->
                        <input type="button" value="Copy Url" class="copyurlbtn" ngxClipboard [cbContent]='callfunc2(item._id, item.GroupCorporateManagerdetail[0]._id)' (click)="showcopied()">
                      </td>
                  </tr>
              </table>


          </td>
        <td  data-label="Number of users under Master group"><p *ngIf="item.Totalnoofusersinthismastergroup">{{item.Totalnoofusersinthismastergroup.length}}</p>
        <button class="copyurlbtn" [routerLink]="['/userlist', item._id]">Go to userlist</button>
        </td>
      </tr>
      </tbody>
    </table>
      <div class="pagination_wrapper">
          <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>
  </div>
</div>


<div *ngIf="addusermodal" class=" sign_modal modal fade" (onHidden)="onHidden()" bsModal #staticModal="bs-modal" [config]="{ show: true}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
      </div>
      <div class="modal-body">
        <img src="../../assets/images/completewebinarlogo.png" alt="#" class="popup_logo1">
        <div class="pateints_list_weraper">
          <div class="myaccount_form_wrapper">
            <form role="form" novalidate [formGroup]="dataForm" (ngSubmit)="dosubmit(dataForm.value)">

              <h6><a href="javascript:void(0)">Add User</a></h6>
              <div class="form-group">
                <label>Username : </label>
                <input type="text"  class="form-control" [formControl]="dataForm.controls['username']" (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['username'].touched && !dataForm.controls['username'].valid  && addpatientvalidation==1">Invalid User Name.</span>
                <span class="has-error" *ngIf ="dataForm.controls['username'].touched && !dataForm.controls['username'].valid && getusername('invalid')==true  && addpatientvalidation==1">Username must contain at least 3 characters, and it should be alphanumeric!</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label>First Name :</label>
                <input type="text" class="form-control" [formControl]="dataForm.controls['firstname']"  (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['firstname'].touched && !dataForm.controls['firstname'].valid && addpatientvalidation==1">Invalid First Name!</span>
                <div class="clearfix"></div>
              </div>
              <div class="form-group">
                <label>Last Name :</label>
                <input type="text" class="form-control" [formControl]="dataForm.controls['lastname']" (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['lastname'].touched && !dataForm.controls['lastname'].valid && addpatientvalidation==1">Invalid Last Name!</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label>Email :</label>
                <input type="text" class="form-control" [formControl]="dataForm.controls['email']"  (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['email'].touched && getemail('blank')==true  && addpatientvalidation==1">Emailid is Required !</span>
                <span class="has-error" *ngIf ="dataForm.controls['email'].touched && getemail('invalid')==true  && addpatientvalidation==1">Invalid Emailid!</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label>Password : </label>
                <input type="password" class="form-control" [formControl]="dataForm.controls['password']"  (keyup)="addpatientvalidationcall()">
                <span class="passspan">Password must include at least 1 uppercase, one lowercase, and a number/special character.</span>
                <span class="has-error" *ngIf ="dataForm.controls['password'].touched && !dataForm.controls['password'].valid  && addpatientvalidation==1">Invalid Password.</span>
                <span class="has-error" *ngIf ="dataForm.controls['password'].touched && !dataForm.controls['password'].valid && getpassword('invalid')==true  && addpatientvalidation==1">Password must contain at least 8 characters,one lower case character , one upper case character , one number, one special character</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label>Confirm Password : </label>
                <input type="password" class="form-control" [formControl]="dataForm.controls['confpassword']"  (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['confpassword'].touched && !dataForm.controls['confpassword'].valid  && addpatientvalidation==1">Please fill in the required field.</span>
                <div class="has-error" *ngIf ="dataForm.hasError('mismatchedPasswords') && dataForm.controls['confpassword'].valid  && addpatientvalidation==1">
                  <span class="has-error">Passwords must match</span>
                </div>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label>Type : </label>
                <select class="form-control" [formControl]="dataForm.controls['type']" (change)="addpatientvalidationcall()">
                  <option value="" disabled selected>Select Type</option>
                  <option value="finders">Finders</option>
                  <option value="imo">Imo</option>
                  <option value="salesrep">Sales Rep</option>
                </select>
                <span class="has-error" *ngIf ="dataForm.controls['type'].touched && !dataForm.controls['type'].valid  && addpatientvalidation==1">Choose a Type.</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label> Gender : </label>
                <select class="form-control" [formControl]="dataForm.controls['gender']"  (click)="addpatientvalidationcall()">
                  <option value="" disabled>Gender </option>
                  <option value="male" name="gender">Male </option>
                  <option value="female" name="gender">Female </option>
                </select>
                <span class="has-error" *ngIf ="dataForm.controls['gender'].touched && !dataForm.controls['gender'].valid  && addpatientvalidation==1"> You must choose your gender!</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label> Date Of Birth : </label>
                <input type="text" class="form-control" placeholder="MM/DD/YYYY" [formControl]="dataForm.controls['dob']" (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['dob'].touched && !dataForm.controls['dob'].valid  && addpatientvalidation==1">Invalid Date of Birth!</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label> Address : </label>
                <textarea   [formControl]="dataForm.controls['address']"  (keyup)="addpatientvalidationcall()"></textarea>
                <span class="has-error" *ngIf ="dataForm.controls['address'].touched && !dataForm.controls['address'].valid && addpatientvalidation==1">Invalid Address!</span>
                <div class="clearfix"></div>
              </div>

              <div class="form-group">
                <label> City : </label>
                <input type="text" class="form-control" [formControl]="dataForm.controls['city']" (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['city'].touched && !dataForm.controls['city'].valid  && addpatientvalidation==1">Invalid City!</span>
                <div class="clearfix"></div>

              </div>

              <div class="form-group">
                <label>State : </label>
                <select class="form-control" [formControl]="dataForm.controls['state']" (change)="addpatientvalidationcall()">
                  <option value="" disabled selected>Select State</option>
                  <option value="{{item.name}}" *ngFor="let item of usastates; let i = index">{{item.name}}</option>
                </select>
                <span class="has-error" *ngIf ="dataForm.controls['state'].touched && !dataForm.controls['state'].valid  && addpatientvalidation==1">Invalid State!</span>
                <div class="clearfix"></div>

              </div>
              <div class="form-group">
                <label>Zip : </label>
                <input type="text" class="form-control" [formControl]="dataForm.controls['zip']" (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['zip'].touched && !dataForm.controls['zip'].valid  && addpatientvalidation==1">Invalid Zip!</span>
                <div class="clearfix"></div>

              </div>


              <div class="form-group">
                <label>Phone : </label>
                <input type="text" class="form-control" appNumber [formControl]="dataForm.controls['phone']" (keyup)="addpatientvalidationcall()">
                <span class="has-error" *ngIf ="dataForm.controls['phone'].touched && !dataForm.controls['phone'].valid  && addpatientvalidation==1">Phone No must be 10 numbers!</span>
                <div class="clearfix"></div>

              </div>

              <div class="clearfix"></div>



              <div class="myaccount_btn_wrapper">

                <input type="submit"  value="Save" class="btn1"/>
                <input type="button"  value="Cancel" class="btn2" (click)="cancelit()"/>
                <span class="has-error" *ngIf="alreadyexist">{{alreadyexist}}</span>
                <div class="clearfix"></div>
              </div>
              <div class="clearfix"></div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-frontfooter></app-frontfooter>

<div *ngIf="copiedmodal" class=" sign_modal modal fade" (onHidden)="onHidden()" bsModal #staticModal="bs-modal" [config]="{ show: true}"
     tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
            </div>
            <div class="modal-body">
                <img src="../../assets/images/completewebinarlogo.png" alt="#" class="popup_logo1"><br/>
                <p class="copiedtext">URL Copied To Clipboard</p>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>